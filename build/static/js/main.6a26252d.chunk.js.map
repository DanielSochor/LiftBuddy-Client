{"version":3,"sources":["utilities/pubsub.js","utilities/helper.js","utilities/authorizer.js","components/LoginSignUpModal/LoginSignUpModal.js","components/Main/Main.js","App.js","serviceWorker.js","index.js"],"names":["Pubsub","obj","observers","publish","notif","data","subs","callback","subscribe","subscriber","cb","push","observer","unsubscribe","i","splice","deepCopyObj","type","Array","isArray","console","log","copy","key","copyObj","length","map","item","Auth","user","baseURL","process","checkForExistingSession","session_token","localStorage","getItem","axios","get","headers","then","response","validateUserData","catch","error","sendSigninRequest","params","validateSigninRequest","signinObj","email_address","password","post","setItem","message","sendSignupRequest","validateSignupRequest","first_name","last_name","alias","email","password_confirm","signinResp","getResponse","sendSignoutRequest","url","method","status","created","updated","user_id","changeTypeBtnTextValues","login","signup","loginType","LoginSignUpModal","useState","modalType","setModalType","changeTypeBtnText","setChangeTypeBtnText","modalIsOpen","setModalIsOpen","errorMessage","setErrorMessage","usernameVal","setUsernameVal","emailVal","setEmailVal","passwordVal","setPasswordVal","confirmPasswordVal","setConfirmPasswordVal","useEffect","handleLogin","handleSignout","handleErrorInfo","handleUsernameChange","event","target","value","handleEmailChange","handlePasswordChange","handleConfirmPasswordChange","errorObj","isOpen","contentLabel","ariaHideApp","className","id","onChange","htmlFor","onClick","newModalType","newChangeBtnText","name","href","preventDefault","username","signupObj","Main","setAuthenticated","handleSignin","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6a26252d.chunk.js","sourcesContent":["var Pubsub = {};\n\n(function(obj) {\n  var observers = {};\n\n  obj.publish = (notif, data) => {\n    if (!observers[notif]) {\n      return false;\n    }\n\n    let subs = observers[notif];\n\n    for (var subscriber of subs) {\n      subscriber.callback(data);\n    }\n    //console.log('publishers are: ' + JSON.stringify(subs[0]));\n  };\n\n  obj.subscribe = (notif, subscriber, cb) => {\n    if (!observers[notif]) {\n      observers[notif] = [];\n    }\n\n    observers[notif].push({\n      observer: subscriber,\n      callback: cb\n    });\n    //console.log('subscribers are: ' + JSON.stringify(observers));\n  };\n\n  obj.unsubscribe = (notif, subscriber) => {\n    let subs = observers[notif];\n\n    for (var i in subs) {\n      if (subs[i].observer === subscriber) {\n        subs.splice(i, 1);\n        observers[notif] = subs;\n        return;\n      }\n    }\n  };\n})(Pubsub);\n\nexport default Pubsub;","const deepCopyObj = (obj) => {\n    const copyObj = () => {\n      let copy = {};\n  \n      for (var key in obj) {\n        copy[key] = deepCopyObj(obj[key]);\n      }\n  \n      return copy;\n    };\n  \n    const copyArr = () => {\n      if (obj.length) {\n        return obj.map(item => {\n          return deepCopyObj(item);\n        });\n      } else {\n        return [];\n      }\n    };\n  \n    let type = typeof obj;\n  \n    // typeof [Array] returns \"object\" so this is needed to check for arrays\n    if (type === 'object' && Array.isArray(obj)) {\n      type = 'array';\n    }\n  \n    if (obj === null) {\n      console.log('null type');\n      return null;\n    } else if (type === 'object') {\n      return copyObj();\n    } else if (type === 'array') {\n      return copyArr();\n    } else {\n      return obj;\n    }\n  }\n\n  export {\n    //shallowCopyObj,\n    deepCopyObj,\n};","import axios from 'axios';\n\nimport Pubsub from './pubsub';\n//import { shallowCopyObj, deepCopyObj } from './helper';\nimport { deepCopyObj } from './helper';\n//import Data from './data';\n\nvar Auth = {};\n\nvar user = {};\n\n(function (obj) {\n  // @TODO \n\n  const baseURL = (process.env.NODE_ENV === 'production') ? process.env.REACT_APP_SERVER_URL : process.env.REACT_APP_LOCAL_URL;\n  console.log(baseURL);\n\n  obj.checkForExistingSession = () => {\n    let session_token = localStorage.getItem('x-session-token');\n\n    if (session_token) {\n        console.log(baseURL + 'api/user');\n    //axios.get(API.getUsers, { headers: { 'x-session-token': session_token } }).then(response => {\n      axios.get(baseURL + 'api/user', { headers: { 'x-session-token': session_token } }).then(response => {\n        if (validateUserData(response.data)) {\n          user = deepCopyObj(response.data);\n        }\n        console.log(user);\n        console.log('user is validated');\n        if (user === {}){\n          console.log('no existing session');\n        } else {\n          console.log('existing session');\n        }\n        //Pubsub.publish(NOTIF.SIGN_IN, null);\n        Pubsub.publish('signin', null);\n      }).catch(error => {\n        console.log('session check failed');\n        console.log(error);\n      });\n    }\n    console.log('session token check'); \n  }\n\n  obj.sendSigninRequest = (params) => {\n    // API require email OR alias\n    // forcing email at the moment - may implement more elegant logic later\n    if (validateSigninRequest(params)) {\n      let signinObj = {\n        email_address: params.email_address,\n        password: params.password\n      };\n      // this extra call is not ideal, but we need to hack our way to getting the correct info on signin.  In the future, the API will need to be refactored to send back all the necessary info\n      \n      //axios.post(API.signin, signinObj).then(response => {\n      axios.post(baseURL + 'api/users/login', signinObj).then(response => {\n        let session_token = response.headers['x-session-token'];\n        localStorage.setItem('x-session-token', session_token);\n        //axios.get(API.getUsers, { headers: { 'x-session-token': session_token } }).then(response => {\n        axios.get(baseURL + 'api/users', { headers: { 'x-session-token': session_token } }).then(response => {\n          user = deepCopyObj(response.data);\n          console.log(user);\n          //Pubsub.publish(NOTIF.SIGN_IN, null);\n          Pubsub.publish('signin', null);\n        }).catch(error => {\n          console.log(error);\n          let errorObj = {\n            message: 'Error signing in, please try again'\n          };\n          //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n          Pubsub.publish('auth_error', errorObj);\n        });\n      }).catch(error => {\n        // @TODO return error codes and display helpful messages to the user, i.e. incorrect password, etc.\n        // Potentially make more DRY\n        let errorObj = {\n          message: 'Error signing in, please try again'\n        };\n        //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n        Pubsub.publish('auth_error', errorObj);\n      });\n    } else {\n      let errorObj = {\n        message: 'Please fill in the required fields'\n      };\n      //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n      Pubsub.publish('auth_error', errorObj);\n    }\n  }\n\n  obj.sendSignupRequest = (params) => {\n    if (validateSignupRequest(params)) {\n      console.log('sent signup request');\n      //axios.post(API.signup, {\n          axios.post(baseURL + 'api/users', {\n\n        first_name: params.first_name,\n        last_name: params.last_name,\n        alias: params.alias,\n        email_address: params.email,\n        password: params.password,\n        password_confirm: params.password_confirm\n      }).then(response => {\n        let signinObj = {\n          email_address: params.email,\n          password: params.password\n        };\n        console.log(signinObj);\n        // these TWO extra calls are not ideal, but we need to hack our way to getting the correct info on signup.  In the future, the API will need to be refactored to send back all the necessary info\n        //axios.post(API.signin, signinObj).then(signinResp => {\n        axios.post(baseURL + 'api/users/login', signinObj).then(signinResp => {\n          let session_token = signinResp.headers['x-session-token'];\n          localStorage.setItem('x-session-token', session_token);\n          //axios.get(API.getUsers, { headers: { 'x-session-token': session_token } }).then(getResponse => {\n          axios.get(baseURL + 'api/users', { headers: { 'x-session-token': session_token } }).then(getResponse => {\n            user = deepCopyObj(getResponse.data);\n            console.log(user);\n            //Pubsub.publish(NOTIF.SIGN_IN, null);\n            Pubsub.publish('signin', null);\n          }).catch(error => {\n            console.log(error);\n            let errorObj = {\n              message: 'Error signing up, please try again'\n            };\n            //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n            Pubsub.publish('auth_error', errorObj);\n          });\n        }).catch(error => {\n          console.log(error);\n          let errorObj = {\n            message: 'Error signing up, please try again'\n          };\n          //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n          Pubsub.publish('auth_error', errorObj);\n        });\n      }).catch(error => {\n        // @TODO return error codes and display helpful messages to the user, i.e. incorrect password, etc.\n        // Potentially make more DRY\n        let errorObj = {\n          message: 'Error signing up, please try again'\n        };\n        //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n        Pubsub.publish('auth_error', errorObj);\n      });\n    } else {\n      let errorObj = {\n        message: 'Please fill out all fields'\n      };\n      //Pubsub.publish(NOTIF.AUTH_ERROR, errorObj);\n      Pubsub.publish('auth_error', errorObj);\n    }\n\n  }\n\n  obj.sendSignoutRequest = () => {\n    // @TODO need to verify what direction we're taking with the session token business\n    let session_token = localStorage.getItem('x-session-token');\n\n    axios({\n        //url: API.signout,\n      url: baseURL + 'api/users/login',\n      method: 'delete',\n      headers: {\n        'x-session-token': session_token\n      }\n    }).then(response => {\n      if (response.status === 200) {\n        user = {};\n        localStorage.setItem('x-session-token', '');\n        //Pubsub.publish(NOTIF.SIGN_OUT, null);\n        Pubsub.publish('signout', null);\n        //Data.handleSignout();\n        console.log('signout success');\n      } else {\n        // @TODO not sure what to do in a .then handler here\n        console.log('signout resolved, but not status 200');\n      }\n    }).catch(error => {\n      console.log(error);\n      // @TODO send an error back to the user\n    });\n  }\n\n})(Auth);\n\nconst validateSigninRequest = (params) => {\n    // API requires either email or alias, and password\n    if ((params.alias || params.email_address) && params.password) {\n      return true;\n    }\n    return false;\n  }\n  \n  const validateSignupRequest = (params) => {\n    /* API requires all of:\n      first_name\n      last_name\n      email\n      alias\n      password\n    */\n    console.log(params);\n    if (params.first_name &&\n      params.last_name &&\n      params.email_address &&\n      params.alias &&\n      params.password &&\n      params.password_confirm) {\n      return true;\n    }\n  \n    return false;\n  }\n\n  const validateUserData = (data) => {\n    if (data.alias &&\n      data.created &&\n      data.email_address &&\n      data.first_name &&\n      data.last_name &&\n      data.updated &&\n      data.user_id) {\n      return true\n    }\n  \n    return false;\n  }\n\n\nexport default Auth;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// console.log('process.env is: ');\n// console.log(process.env);\n\n// //Can we somehow include this in the future:\n// //var baseURL = (process.env.NODE_ENV === 'production') ? process.env.REACT_APP_SERVER_URL : process.env.REACT_APP_LOCAL_URL;\n\n// function Auth() {\n//     var baseURL = '';\n//     if (process.env.NODE_ENV === 'production') {\n//         baseURL = process.env.REACT_APP_SERVER_URL\n//         let test = {\n//             email_address: 'production@gmail.com'\n//         };\n//         axios.post(baseURL + 'api/user', test)\n//             .then(response => {\n//                 console.log('response is: ');\n//                 console.log(response);\n//             }).catch(error => {\n//                 console.log(error);\n//             });\n//     } else if (process.env.NODE_ENV === 'development') {\n//         baseURL = process.env.REACT_APP_LOCAL_URL\n//         let test = {\n//             email_address: 'development@gmail.com'\n//         };\n//         axios.post(baseURL + 'api/user', test)\n//             .then(response => {\n//                 console.log('response is: ');\n//                 console.log(response);\n//             }).catch(error => {\n//                 console.log(error);\n//             });\n//     } else {\n//         console.log('development environment is not production or development');\n//     };\n// }\n\n// export default Auth;","import React, { useState, useEffect } from '../../../node_modules/react';\nimport \"./LoginSignUpModal.css\"\nimport Modal from '../../../node_modules/react-modal';\nimport Auth from '../../utilities/authorizer';\nimport Pubsub from '../../utilities/pubsub';\n\nconst changeTypeBtnTextValues = {\n    login: 'Don\\'t have an account?',\n    signup: 'Already have an account?'\n};\n\nconst loginType = {\n    login: 'Log In',\n    signup: 'Sign Up'\n};\n\nfunction LoginSignUpModal() {\n\n    const [modalType, setModalType] = useState(loginType.login);\n    const [changeTypeBtnText, setChangeTypeBtnText] = useState(changeTypeBtnTextValues.login);\n    const [modalIsOpen, setModalIsOpen] = useState(true);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const [usernameVal, setUsernameVal] = useState('');\n    const [emailVal, setEmailVal] = useState('');\n    const [passwordVal, setPasswordVal] = useState('');\n    const [confirmPasswordVal, setConfirmPasswordVal] = useState('');\n\n    useEffect(() => {\n        //Pubsub.subscribe('modal_toogle', this, handleModalToggle);\n        Pubsub.subscribe('login', this, handleLogin);\n        Pubsub.subscribe('logout', this, handleSignout);\n        Pubsub.subscribe('auth_error', this, handleErrorInfo);\n        Auth.checkForExistingSession();\n        return (() => {\n            //Pubsub.unsubscribe('modal_toogle', this);\n            Pubsub.unsubscribe('login', this);\n            Pubsub.unsubscribe('logout', this);\n            Pubsub.unsubscribe('auth_error', this);\n        });\n    }, []);\n\n    // const handleModalToggle = (type) => {\n    //     if (type === loginType.login) {\n    //       setModalType(loginType.login);\n    //       setChangeTypeBtnText(changeTypeBtnTextValues.login);\n    //     } else if (type === loginType.signup) {\n    //       setModalType(loginType.signup);\n    //       setChangeTypeBtnText(changeTypeBtnTextValues.signup);\n    //     }\n    //     setErrorMessage('');\n    //     setModalIsOpen(false);\n    //   }\n\n\n    const toggleModalType = () => {\n        //setErrorMessage('');\n        let newModalType = modalType === loginType.login ? loginType.signup : loginType.login;\n        let newChangeBtnText = modalType === loginType.login ? changeTypeBtnTextValues.signup : changeTypeBtnTextValues.login;\n        setModalType(newModalType);\n        setChangeTypeBtnText(newChangeBtnText);\n    }\n\n    const handleLogin = () => {\n        setModalIsOpen(false);\n        //Pubsub.publish('login', true);\n    }\n\n    const handleSignout = () => {\n        setModalIsOpen(true);\n        //Pubsub.publish('login', false);\n    }\n\n    // const openModal = () => {\n    //     setModalIsOpen(true);\n    // }\n    // const closeModal = () => {\n    //     setModalIsOpen(false);\n    // }\n    const handleUsernameChange = (event) => {\n        setUsernameVal(event.target.value);\n    }\n    const handleEmailChange = (event) => {\n        // @TODO implement live validation\n        setEmailVal(event.target.value);\n    }\n    const handlePasswordChange = (event) => {\n        // @TODO implement live validation\n        setPasswordVal(event.target.value);\n    }\n    const handleConfirmPasswordChange = (event) => {\n        setConfirmPasswordVal(event.target.value);\n    }\n    const handleErrorInfo = (errorObj) => {\n        setErrorMessage(errorObj.message);\n    }\n\n    const authSubmit = (event) => {\n        event.preventDefault();\n        setErrorMessage('');\n        if (modalType === loginType.login) {\n            let signinObj = {\n                username: usernameVal,\n                password: passwordVal\n            };\n            console.log('sign in obj: ');\n            console.log(signinObj);\n            Auth.sendSigninRequest(signinObj);\n        } else if (modalType === loginType.signup) {\n            let signupObj = {\n                email: emailVal,\n                username: usernameVal,\n                password: passwordVal,\n                password_confirm: confirmPasswordVal\n            };\n            console.log('sign up obj: ');\n            console.log(signupObj);\n            Auth.sendSignupRequest(signupObj);\n        }\n    }\n\n    const generateFormContents = () => {\n        if (modalType === loginType.login) {\n            return (\n                <div className='modal-content'>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"loginUsername\" type=\"text\" className=\"validate\" value={usernameVal} onChange={handleUsernameChange} />\n                            <label htmlFor=\"loginUsername\">Username</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"loginPassword\" type=\"password\" className=\"validate\" value={passwordVal} onChange={handlePasswordChange} />\n                            <label htmlFor=\"loginPassword\">Password</label>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else if (modalType === loginType.signup) {\n            return (\n                <div className='modal-content'>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"signUpEmail\" type=\"email\" className=\"validate\" value={emailVal} onChange={handleEmailChange} />\n                            <label htmlFor=\"signUpEmail\">Email</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"signUpUsername\" type=\"text\" className=\"validate\" value={usernameVal} onChange={handleUsernameChange} />\n                            <label htmlFor=\"signUpUsername\">Username</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"signUpPassword\" type=\"password\" className=\"validate\" value={passwordVal} onChange={handlePasswordChange} />\n                            <label htmlFor=\"signUpPassword\">Password</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"input-field col s12\">\n                            <input id=\"confirmPassword\" type=\"password\" className=\"validate\" value={confirmPasswordVal} onChange={handleConfirmPasswordChange} />\n                            <label htmlFor=\"confirmPassword\">Confirm Password</label>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            console.log('error in authModal type: ' + modalType);\n        }\n    }\n\n    const generateErrorInfo = () => {\n        return (\n            <span className='text-danger'>{errorMessage}</span>\n        );\n    }\n\n    return (\n        <Modal\n            isOpen={modalIsOpen}\n            contentLabel='Login Modal'\n            ariaHideApp={false}\n        >\n            <h5 className='modal-title'>{modalType}</h5>\n            <div className='error-info'>\n                {generateErrorInfo()}\n            </div>\n            <form>\n                {generateFormContents()}\n                <div className=\"row center\">\n                    <button type='button' className='btn btn-link waves-light light-blue darken-3' onClick={toggleModalType}>{changeTypeBtnText}</button>\n                </div>\n                <div className='modal-footer row center'>\n                    <button className=\"btn waves-effect waves-light light-blue darken-3\" type=\"submit\" name=\"action\" id=\"signUpBtn\" href=\"/homepage\" onClick={authSubmit}>Submit<i className=\"material-icons right\">send</i></button>\n                </div>\n                {/* <div className=\"modal-footer\">\n                    <a className=\"modal-close waves-effect waves-green btn-flat\" onClick={closeModal}>X</a>\n                </div> */}\n            </form>\n        </Modal>\n    )\n}\n\n// colors for buttons: https://materializecss.com/color.html\n\nexport default LoginSignUpModal;","import React, { useState, useEffect } from 'react';\n//import './main.css';\n//-import Run from \"../../pages/Run/Run\";\nimport Pubsub from '../../utilities/pubsub';\nimport LoginSignUpModal from '../LoginSignUpModal/LoginSignUpModal';\n//import Challenge from '../Challenge/Challenge';\n//import Auth from '../../utilities/authorizer';\n//import HomePage from \"../../pages/HomePage/HomePage\";\n//-import Bike from '../../pages/Bike/Bike';\n//-import Abstain from '../../pages/Abstaining/Abstaining';\n//-import Water from '../../pages/Water/Water';\n//-import ChallengePage from '../ChallengePage/ChallengePage';\n//import ChallengeContainer from '../ChallengeContainer/ChallengeContainer';\n//-import FAB from '../FloatingButton/Fab';\n//import { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nfunction Main() {\n\n  const [authenticated, setAuthenticated] = useState(false);\n  //-const [challengeType, setChallengeType] = useState('');\n\n  useEffect(() => {\n    Pubsub.subscribe('login', this, handleSignin);\n    Pubsub.subscribe('logout', this, handleSignout);\n    //-Pubsub.subscribe('challengeType', this, handleChallengeType);\n    return (() => {\n      Pubsub.unsubscribe('login', this);\n      Pubsub.unsubscribe('logout', this);\n      //-Pubsub.unsubscribe('challengeType', this);\n    });\n  }, []);\n\n  const handleSignout = () => {\n    setAuthenticated(false);\n  }\n\n  const handleSignin = () => {\n    setAuthenticated(true);\n  }\n\n  //-const handleChallengeType = (challengeType) => {\n  //-  setChallengeType(challengeType);\n  //-  console.log('challenge type is: ' + challengeType);\n  //-}\n\n  // const pageDirector = () => {\n  //   if (authenticated) {\n  //     switch (challengeType) {\n  //       case ('run'):\n  //         return <Run />;\n  //       case ('bike'):\n  //         return <Bike />;\n  //       case ('water'):\n  //         return <Water />;\n  //       case ('abstain'):\n  //         return <Abstain />;\n  //       default:\n  //         return <ChallengePage />\n  //     }\n  //   }\n  // }\n\n  return (\n\n    <div>\n      {/* <Router>\n        <div>\n          <Route exact path=\"/challengepage\" component={ChallengePage} />\n          <Route exact path=\"/homepage\" component={HomePage}/>\n        </div>\n      </Router> */}\n      <LoginSignUpModal />\n      {/* <FAB /> */}\n      {/* {pageDirector()} */}\n    </div>\n  );\n}\n\nexport default Main;","import React from 'react';\nimport './App.css';\n//import Auth from './authorizer';\n\n// function App() {\n\n//   const authSubmit = (event) => {\n//     event.preventDefault();\n//     Auth();\n//   }\n\n//   return (\n//     <div className=\"App\">\n//       <header className=\"App-header\">\n//            <button onClick={authSubmit}>Submit</button>\n//       </header>\n//     </div>\n//   );\n// }\n\n//import Navbar from './components/Navbar/Navbar';\nimport Main from './components/Main/Main';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/* <Navbar /> */}\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}