(window["webpackJsonplift-buddy-client"]=window["webpackJsonplift-buddy-client"]||[]).push([[0],{19:function(e,n,a){e.exports=a(56)},24:function(e,n,a){},25:function(e,n,a){},26:function(e,n,a){},44:function(e,n,a){},45:function(e,n,a){},56:function(e,n,a){"use strict";a.r(n);var t=a(0),o=a.n(t),s=a(5),l=a.n(s),r=(a(24),a(25),a(26),"Lift Buddy"),c={LOG_IN:"login",LOG_OUT:"logout",SIGN_UP:"signup",AUTH_ERROR:"auth_error",TOGGLE_SIDEBAR_MOBILE:"toggle_sidebar_mobile"},i="api/user/userinfo",u="api/user/login",m="api/user/logout",g="api/user/signup",d={};!function(e){var n={};e.publish=function(e,a){if(!n[e])return!1;var t=n[e],o=!0,s=!1,l=void 0;try{for(var r,c=t[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){r.value.callback(a)}}catch(i){s=!0,l=i}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}},e.subscribe=function(e,a,t){n[e]||(n[e]=[]),n[e].push({observer:a,callback:t})},e.unsubscribe=function(e,a){var t=n[e];for(var o in t)if(t[o].observer===a)return t.splice(o,1),void(n[e]=t)}}(d);var f=d;var p=function(){return o.a.createElement("button",{className:"navbar-logo btn btn-dark",onClick:function(){console.log("logo clicked"),window.innerWidth<=575&&(console.log("Mobile"),f.publish(c.TOGGLE_SIDEBAR_MOBILE,null))}},r)},b=a(3),v=a.n(b),h={},E={};!function(e){var n="https://lift-buddy-server.herokuapp.com/";console.log("baseURL is: "+n),console.log("local storage"),console.log(localStorage),e.checkForExistingSession=function(){var n=localStorage.getItem("x-session-token");n?(console.log("session token exists"),console.log("session token is: "+n),e.getUserInfo(n)):console.log("no session token exists")},e.sendLogInRequest=function(a){if(console.log("authorizer sendLogInRequest log in object is: "),console.log(a),_(a))console.log("API Login is: "+u),v.a.post(n+u,a).then((function(n){console.log("successful hit of API.login"),console.log("logInResponse is"),console.log(n);var a=n.headers["x-session-token"];localStorage.setItem("x-session-token",a),console.log("session token is: "),console.log(a),e.getUserInfo(a)})).catch((function(e){f.publish(c.AUTH_ERROR,{message:"Error logging in, please try again"})}));else{f.publish(c.AUTH_ERROR,{message:"Please fill in the required fields"})}},e.sendSignUpRequest=function(a){O(a)?(console.log("API signup is: "+g),v.a.post(n+g,{first_name:a.first_name,last_name:a.last_name,username:a.username,email_address:a.email_address,password:a.password,password_confirm:a.password_confirm}).then((function(n){console.log("response is: "),console.log(n);var t={username:a.username,password:a.password};console.log("authorizer sendSignUpRequest log in object is: "),console.log(t),e.sendLogInRequest(t)}))):console.log("Sign up request did not validate")},e.getUserInfo=function(e){v.a.get(n+i,{headers:{"x-session-token":e}}).then((function(e){N(e.data)&&(E=function e(n){var a=typeof n;return"object"===a&&Array.isArray(n)&&(a="array"),null===n?(console.log("null type"),null):"object"===a?function(){var a={};for(var t in n)a[t]=e(n[t]);return a}():"array"===a?n.length?n.map((function(n){return e(n)})):[]:n}(e.data),f.publish(c.LOG_IN,null)),console.log("deep copied user is: "),console.log(E)})).catch((function(e){console.log(e)}))},e.sendLogOutRequest=function(){var e=localStorage.getItem("x-session-token");v()({url:n+m,method:"delete",headers:{"x-session-token":e}}).then((function(e){200===e.status?(E={},localStorage.setItem("x-session-token",""),f.publish(c.LOG_OUT,null),console.log("signout success")):console.log("signout resolved, but not status 200")})).catch((function(e){console.log(e)}))}}(h);var O=function(e){return!!(e.first_name&&e.last_name&&e.username&&e.email_address&&e.password&&e.password_confirm)},_=function(e){return!(!e.username||!e.password)},N=function(e){return e.user_id&&e.first_name&&e.last_name&&e.username&&e.email_address&&e.created&&e.updated?(console.log("user data validates as true"),!0):(console.log("user data validates as false"),!1)},w=h;var k=function(){return o.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},o.a.createElement(p,null),o.a.createElement("div",{className:"navbar-nav ml-auto"},o.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return w.sendLogOutRequest()}},"Sign Out")))},j=(a(44),a(2)),S=(a(45),a(18)),y=a.n(S),I={login:"Don't have an account?",signup:"Already have an account?"},R={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",minWidth:"350px"}};var L=function(){var e=this,n=Object(t.useState)("login"),a=Object(j.a)(n,2),s=a[0],l=a[1],r=Object(t.useState)(I.login),i=Object(j.a)(r,2),u=i[0],m=i[1],g=Object(t.useState)(!0),d=Object(j.a)(g,2),p=d[0],b=d[1],v=Object(t.useState)(""),h=Object(j.a)(v,2),E=h[0],O=h[1],_=Object(t.useState)(""),N=Object(j.a)(_,2),k=N[0],S=N[1],L=Object(t.useState)(""),x=Object(j.a)(L,2),U=x[0],A=x[1],C=Object(t.useState)(""),q=Object(j.a)(C,2),G=q[0],P=q[1],T=Object(t.useState)(""),B=Object(j.a)(T,2),M=B[0],D=B[1],F=Object(t.useState)(""),H=Object(j.a)(F,2),W=H[0],z=H[1],J=Object(t.useState)(""),$=Object(j.a)(J,2),K=$[0],Q=$[1];Object(t.useEffect)((function(){return f.subscribe(c.LOG_IN,e,V),f.subscribe(c.LOG_OUT,e,X),f.subscribe("auth_error",e,oe),w.checkForExistingSession(),function(){f.unsubscribe("login",e),f.unsubscribe("logout",e),f.unsubscribe("auth_error",e)}}),[]),Object(t.useEffect)((function(){w.checkForExistingSession()}),[]);var V=function(){b(!1)},X=function(){b(!0)},Y=function(e){S(e.target.value)},Z=function(e){A(e.target.value)},ee=function(e){P(e.target.value)},ne=function(e){D(e.target.value)},ae=function(e){z(e.target.value)},te=function(e){Q(e.target.value)},oe=function(e){O(e.message)},se=function(){console.log("test")};return o.a.createElement(y.a,{isOpen:p,contentLabel:"LogIn Modal",style:R,ariaHideApp:!1},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},s)),o.a.createElement("div",{className:"error-info"},o.a.createElement("span",{className:"text-danger"},E)),o.a.createElement("form",null,"login"===s?o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Username"),o.a.createElement("input",{className:"form-control",placeholder:"username",value:G,onChange:ee})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{className:"form-control",placeholder:"password",value:W,onChange:ae}))):"signup"===s?o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"First Name"),o.a.createElement("input",{className:"form-control",placeholder:"first name",value:k,onChange:Y})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Last Name"),o.a.createElement("input",{className:"form-control",placeholder:"last name",value:U,onChange:Z})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Username"),o.a.createElement("input",{className:"form-control",placeholder:"username",value:G,onChange:ee})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email"),o.a.createElement("input",{className:"form-control",placeholder:"name@example.com",value:M,onChange:ne})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{className:"form-control",placeholder:"password",value:W,onChange:ae})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Confirm Password"),o.a.createElement("input",{className:"form-control",placeholder:"password",value:K,onChange:te}))):void console.log("error in authModal type: "+s),o.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){var e="login"===s?"signup":"login",n="login"===s?I.signup:I.login;l(e),m(n)}},u),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(e){if(e.preventDefault(),O(""),"login"===s){var n={username:G,password:W};console.log("sign in obj: "),console.log(n),w.sendLogInRequest(n)}else if("signup"===s){var a={first_name:k,last_name:U,email_address:M,username:G,password:W,password_confirm:K};console.log("sign up obj: "),console.log(a),w.sendSignUpRequest(a),se()}}},"Submit"))))};var x=function(){return o.a.createElement("div",{className:"container"},o.a.createElement(L,null))};var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,null),o.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.61838b56.chunk.js.map